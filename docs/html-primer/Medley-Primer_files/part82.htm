<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>WHENHELDFN and WHENSELECTEDFN Fields of a Menu                         </title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part81.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part83.htm">Next &gt;</a></p><h2 style="padding-top: 8pt;padding-left: 35pt;text-indent: 0pt;text-align: left;">WHENHELDFN and WHENSELECTEDFN Fields of a Menu                         </h2><p style="padding-top: 9pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">Another way to get a menu to do things is to define functions, and make them the</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">values of the menu’s <span class="s3">WHENHELDFN </span>and <span class="s3">WHENSELECTEDFN </span>fields. As the value of the</p><p class="s3" style="padding-left: 107pt;text-indent: 0pt;text-align: left;">WHENHELDFN <span class="p">field of a menu, the function you defined will be executed when you press</span></p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">and hold a mouse button inside the menu. As the value of the <span class="s3">WHENSELECTEDFN </span>field of a menu, the function you defined will be executed when you choose a menu item. This</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">example has the same functionality as the previous example, where each menu item was entered as a list of three items.</p><p style="padding-top: 6pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">As an example, type in these two functions so that they can be executed when the menu is created and displayed:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-top: 6pt;padding-left: 143pt;text-indent: 0pt;line-height: 88%;text-align: left;">(DEFINEQ (MY.MENU3.WHENHELD (ITEM.SELECTED MENU.FROM BUTTON.PRESSED)</p><p class="s3" style="padding-left: 143pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(SELECTQ ITEM.SELECTED</p><p class="s3" style="padding-left: 179pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(QUIT (PROMPTPRINT &quot;CHOOSE THIS TO STOP&quot;)</p><p class="s3" style="padding-left: 215pt;text-indent: -36pt;line-height: 88%;text-align: left;">(NEXT-QUESTION (PROMPTPRINT &quot;CHOOSE THIS TO BE ASKED THE NEXT QUESTION&quot;))</p><p class="s3" style="padding-left: 215pt;text-indent: -36pt;line-height: 88%;text-align: left;">(NEXT-TOPIC (PROMPTPRINT &quot;CHOOSE THIS TO MOVE ON TO THE NEXT SUBJECT&quot;))</p><p class="s3" style="padding-left: 215pt;text-indent: -36pt;line-height: 88%;text-align: left;">(SEE-TOPICS (PROMPTPRINT &quot;CHOOSE THIS TO SEE THE TOPICS NOT YET LEARNED&quot;))</p><p class="s3" style="padding-left: 179pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(ERROR (PROMPTPRINT &quot;NO MATCH FOUND&quot;))))</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 143pt;text-indent: 0pt;line-height: 88%;text-align: left;">(DEFINEQ (MY.MENU3.WHENSELECTED (ITEM.SELECTED MENU.FROM BUTTON.PRESSED)</p><p class="s3" style="padding-left: 143pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(SELECTQ ITEM.SELECTED</p><p class="s3" style="padding-left: 179pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(QUIT (PRINT &quot;STOPPED&quot;)</p><p class="s3" style="padding-left: 179pt;text-indent: 0pt;line-height: 88%;text-align: left;">(NEXT-QUESTION (PRINT &quot;HERE IS THE NEXT QUESTION&quot;)) (NEXT-TOPIC (PRINT &quot;HERE IS THE NEXT SUBJECT&quot;)) (SEE-TOPICS (PRINT &quot;THE FOLLOWING HAVE NOT BEEN</p><p class="s3" style="padding-left: 215pt;text-indent: 0pt;line-height: 10pt;text-align: left;">LEARNED . . .&quot;))</p><p class="s3" style="padding-left: 179pt;text-indent: 0pt;line-height: 11pt;text-align: left;">(ERROR (PROMPTPRINT &quot;NO MATCH FOUND&quot;))))</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">Now, to create the menu, type:</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(SETQ MY.MENU3 (CREATE MENU</p><p class="s3" style="padding-left: 167pt;text-indent: 0pt;line-height: 11pt;text-align: left;">TITLE <span class="s2"></span><span class="p"> </span>&quot;PLEASE CHOOSE ONE OF THE ITEMS&quot;</p><p class="s3" style="padding-left: 167pt;text-indent: 0pt;line-height: 86%;text-align: left;">ITEMS <span class="s2"></span><span class="p"> </span>’(QUIT NEXT-QUESTION NEXT-TOPIC SEE-TOPICS) WHENHELDFN <span class="s2"></span><span class="p"> </span>(FUNCTION MY.MENU3.WHENHELD) WHENSELECTEDFN <span class="s2"></span><span class="p"> </span>(FUNCTION MY.MENU3.WHENSELECTED)))</p><p style="padding-top: 6pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">To see your menu work, type</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(ADDMENU MY.MENU3)</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">Now, due to executing the <span class="s3">WHENHELDFN </span>function, holding down any mouse button while pointing to a menu item will display an explanation of the item in the prompt window.</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">The screen will once again look like Figure 13-4 when the mouse button is held when the mouse cursor is pointing to the item <span class="s3">NEXT-TOPIC </span>.</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;line-height: 106%;text-align: justify;">Now due to executing the <span class="s3">WHENSELECTEDFN </span>function, releasing the mouse button to select an item will cause the proper actions for that item to be taken. The screen will once again look like Figure 13-5 when the item <span class="s3">NEXT-TOPIC </span>is selected. The crucial</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">thing to note is that the functions you defined for <span class="s3">WHENHELDFN </span>and <span class="s3">WHENSELECTEDFN</span></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">are automatically given the following arguments:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">1. The item that was sølected, <span class="s3">ITEM.SELECTED</span></p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">2. The menu it was selected from, <span class="s3">MENU.FROM</span></p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">3. The mousø button that was pressed <span class="s3">BUTTON PRESSED</span></p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;text-align: justify;">These functions, <span class="s3">MY.MENU3.WHENHELD </span>and <span class="s3">MY.MENU3.WHENSELECTED</span>, were quoted</p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">using <span class="s3">FUNCTION </span>instead of <span class="s3">QUOTE </span>both for program readability and so that the compiler can produce faster code when the program is compiled. It is good style to quote</p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 12pt;text-align: justify;">functions in Lisp by using the function <span class="s3">FUNCTION </span>instead of <span class="s3">QUOTE</span>.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part81.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part83.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
