<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Getting Windows to Do Things</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part74.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part76.htm">Next &gt;</a></p><h3 style="padding-left: 71pt;text-indent: 0pt;text-align: left;">Getting Windows to Do Things</h3><p style="padding-top: 8pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">Four basic window properties will be discussed here: <span class="s3">CURSORINFN </span>, <span class="s3">CURSOROUTFN</span>, <span class="s3">CURSORMOVEDFN</span>, and <span class="s3">BUTTONEVENTFN</span>.</p><p style="padding-top: 7pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">A function can be stored as the value of the <span class="s3">CURSORlNFN </span>property of a window. It is called when the mouse cursor is moved into that window.</p><p style="padding-top: 6pt;padding-left: 48pt;text-indent: 0pt;text-align: center;">Look at the following  example:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">1. First, create a window called <span class="s3">MY.WINDOW</span>. Type:</p><p class="s3" style="padding-top: 7pt;padding-left: 125pt;text-indent: 0pt;line-height: 11pt;text-align: left;">(SETQ MY.WINDQW</p><p class="s3" style="padding-left: 155pt;text-indent: 0pt;line-height: 10pt;text-align: left;">(CREATEW</p><p class="s3" style="padding-left: 172pt;text-indent: 0pt;line-height: 88%;text-align: left;">(CREATEREGION 200 200 200 200) &quot;THIS WINDOW WILL SCREAM!&quot;))</p><p style="padding-top: 6pt;padding-left: 49pt;text-indent: 0pt;text-align: center;">This creates a window.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 125pt;text-indent: -17pt;line-height: 107%;text-align: left;">2. Now define the function <span class="s3">SCREAME </span>R. It will be stored on the property <span class="s3">CURSOR1NFN </span>. (Notice that this function has one argument, <span class="s3">WlNDOWNAM </span>E. All functions called from the property <span class="s3">CURSOR1NFN </span>are passed the window it was called from. So the value of <span class="s3">MY.WINDOW </span>is bound to <span class="s3">WINDOWNAME</span>. When it is called, <span class="s3">SCREAME</span>R simply rings</p><p style="padding-left: 125pt;text-indent: 0pt;text-align: left;">bells.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-top: 6pt;padding-left: 142pt;text-indent: -18pt;line-height: 88%;text-align: left;">(DEFINEQ (SCREAMER (WINDOWNAME) (RINGBELLS)</p><p class="s3" style="padding-left: 142pt;text-indent: 0pt;line-height: 88%;text-align: left;">(PROMPTPRINT &quot;YAY - IT WORKS!&quot;) (RINGBELLS)))</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 125pt;text-indent: -17pt;line-height: 107%;text-align: left;">3. Now, alter that window’s <span class="s3">CURSORINFN </span>property, so that the system calls the function <span class="s3">SCREAMER </span>at the appropriate time. Type:</p><p class="s3" style="padding-top: 7pt;padding-left: 155pt;text-indent: -30pt;line-height: 88%;text-align: left;">(WINDOWPROP MY.WINDOW ’CURSORINFN (FUNCTION SCREAMER))</p><p style="padding-top: 6pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">4. After this, when you move the mouse cursor into <span class="s3">MY.WlNDOW </span>, the <span class="s3">CURSORINFN</span></p><p style="padding-left: 125pt;text-indent: 0pt;text-align: left;">property’s function is called, and it rings bells twice.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s3" style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">CURSORINFN <span class="p">is one of the many window properties that come with each window - just as </span>REGION <span class="p">and </span>TITLE <span class="p">did. Other properties include:</span></p><p class="s3" style="padding-top: 7pt;padding-left: 203pt;text-indent: -96pt;line-height: 107%;text-align: left;">CURSOROUTFN <span class="p">The function that is the value of this property is executed when the cursor is moved out of a window.</span></p><p class="s3" style="padding-top: 6pt;padding-left: 203pt;text-indent: -96pt;line-height: 107%;text-align: left;">CURSORMOVEDFN <span class="p">The function that is the value of this property is executed when the cursor is moved while it is inside the window.</span></p><p class="s3" style="padding-top: 6pt;padding-left: 203pt;text-indent: -96pt;line-height: 107%;text-align: left;">BUTTONEVENTFN <span class="p">The function that is the value of this property is executed when either the left or middle mouse buttons are pressed (or released).</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">Figure 12-3 shows <span class="s3">MY.WlNDOW</span>’s properties. Notice that the <span class="s3">CURSORINFN </span>has the</p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">function <span class="s3">SCREAMER </span>stored in it. The properties were shown in this window using the function <span class="s3">INSPECT</span>. <span class="s3">INSPECT </span>is covered in Chapter 17.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 136pt;text-indent: 0pt;text-align: left;"><span><img width="400" height="382" alt="image" src="Image_085.gif"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 140pt;text-indent: 0pt;text-align: left;">Figure 12-3. Inspecting <span class="s3">MY.WINDOW </span>for Mouse-Related Window Properties</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 4pt;padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">You can define functions for the values of the properties <span class="s3">CURSOROUTFN </span>and <span class="s3">CURSORMOVEDFN </span>in much the same way as you did for <span class="s3">CURSORINFN</span>. The function that is the value of the property <span class="s3">BUTTONEVENTF </span>N, however, can be specialized to respond in different ways, depending on which mouse button is pressed. This is explained in the</p><p style="padding-left: 107pt;text-indent: 0pt;line-height: 11pt;text-align: left;">next section.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part74.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part76.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
