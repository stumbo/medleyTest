<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Global Variables</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part131.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part133.htm">Next &gt;</a></p><h3 style="padding-left: 71pt;text-indent: 0pt;text-align: left;">Global Variables</h3><p style="padding-top: 8pt;padding-left: 107pt;text-indent: 0pt;text-align: left;">Once defined, global variables remain until Lisp is reloaded. Avoid using global</p><p style="padding-left: 107pt;text-indent: 0pt;text-align: left;">variables if at all possible! One specific problem arises when programs use the function</p><p class="s3" style="padding-left: 107pt;text-indent: 0pt;line-height: 107%;text-align: left;">GENSYM<span class="p">. In program development, many atoms are created that may no longer be useful. Hints:</span></p><p style="padding-top: 6pt;padding-left: 108pt;text-indent: 0pt;text-align: left;">• Use</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(DELDEF <span class="s4">atomname </span>’PROP)</p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">to delete property lists, and</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(DELDEF <span class="s4">atomname </span>’VARS)</p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">to have the atom act like it is not defined.</p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;text-align: left;">These not only remove the definition from memory, but also change the appropriate <span class="s3">fileCOMS </span>that the deleted object was associated with so that the file package will not attempt to save the object (function, variable, record definition, and so forth) the next time the file is made. J ust doing something like</p><p class="s3" style="padding-top: 7pt;padding-left: 143pt;text-indent: 0pt;text-align: left;">(SETQ (<span class="s4">arg atomname</span>) ’NOBIND)</p><p style="padding-top: 7pt;padding-left: 119pt;text-indent: 0pt;line-height: 107%;text-align: left;">looks like it will have the same effect as the second <span class="s3">DELDEF </span>above, but the <span class="s3">SETQ </span>does not update the file package.</p><p style="padding-top: 6pt;padding-left: 119pt;text-indent: -11pt;line-height: 107%;text-align: left;">• If you are generating atom names with <span class="s3">GENSYM </span>, try to keep a list of the atom names that are no longer needed. Reuse these atom names, before generating new ones.</p><p style="padding-left: 119pt;text-indent: 0pt;text-align: left;">There is a (fairly large) maximum to the number of atoms you can have, but things slow down considerably when you create lots of atoms.</p><p style="padding-top: 6pt;padding-left: 108pt;text-indent: 0pt;text-align: left;">• When possible, use a data structure such as a list or an array, instead of many</p><p style="padding-left: 119pt;text-indent: 0pt;text-align: left;">individual atoms. Such a structure has only one pointer to it. Once this pointer is</p><p style="padding-left: 119pt;text-indent: 0pt;text-align: left;">removed, the whole structure will be garbage-collected and space will be reclaimed.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part131.htm">&lt; Previous</a><span> | </span><a href="../Medley-Primer.html">Contents</a><span> | </span><a href="part133.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
